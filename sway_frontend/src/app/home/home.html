<div class="landing-bg">
  <nav class="landing-nav">
    <img src="assets/logoName.png" alt="Sway Logo" class="dashboard-logo">
    <div class="nav-links">
      <a href="#" class="nav-link" (click)="showFeatures()">Features</a>
      <a href="#" class="nav-link" (click)="showContact()">Contact</a>
      <button class="get-started-btn" (click)="goToLogin()">Log in</button>
    </div>
  </nav>
  <div class="landing-center">
    <div class="headline" data-aos="fade-up" data-aos-duration="1000">
      <div class="animate-text">
        <span class="word">Sync</span>
        <span class="word">Your</span>
        <span class="highlight word">Vision</span>
      </div>
      <div class="animate-text">
        <span class="word">Share</span>
        <span class="word">Your</span>
        <span class="word">Stage</span>
      </div>
    </div>
    <div class="subheadline" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">
      Seamlessly share formations with your dancers, making complex choreography instantly clear and rehearsals flow naturally.
    </div>
    <div class="cta-btn-wrapper" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="400">
      <button 
        class="cta-btn"
        [class.splitting]="showSplit"
        (click)="onButtonClick()"
        (touchstart)="onButtonClick()"
        (transitionend)="onAnimationComplete()">
        Get started
      </button>
      <div 
        class="split-btns"
        [class.active]="showSplit">
        <button class="split-btn" (click)="CreateUser()" (touchstart)="CreateUser()">Create Team</button>
        <button class="split-btn" (click)="JoinTeam()" (touchstart)="JoinTeam()">Join a Team</button>
      </div>
    </div>
  </div>
</div>

<!-- Login Popup -->
<div class="login-popup-overlay" *ngIf="showLoginPopup" (click)="closeLoginPopup()">
  <div class="login-popup-content" (click)="$event.stopPropagation()">
    <app-login (close)="closeLoginPopup()"></app-login>
  </div>
</div>

<!-- Join Team Modal -->
<div class="join-team-overlay" *ngIf="showJoinTeamModal" (click)="closeJoinTeamModal()">
  <div class="join-team-modal" (click)="$event.stopPropagation()">
    <!-- Step 1: Enter Team Code -->
    <div class="modal-step" *ngIf="joinStep === 1">
      <h2>Join a Team</h2>
      <div class="join-code-form">
        <input type="text" [(ngModel)]="joinCode" name="joinCode" placeholder="Enter team code" />
        <button class="join-submit-btn" (click)="verifyTeamCode()">Join Team</button>
      </div>
    </div>

    <!-- Step 2: Select Name -->
    <div class="modal-step" *ngIf="joinStep === 2">
      <h2>Select Your Name </h2>
      <div class="team-members-list">
        <button 
          *ngFor="let member of sortedTeamMembers" 
          class="member-btn"
          [class.selected]="selectedMember === member"
          [disabled]="member.email"
          (click)="selectMember(member)">
          <div class="member-info">
            <span class="member-name">{{member.name}}</span>
            <span class="member-status" *ngIf="member.email">Already has account</span>
          </div>
        </button>
      </div>
      <button class="continue-btn" [disabled]="!selectedMember" (click)="goToStep3()">Continue</button>
    </div>

    <!-- Step 3: Complete Profile -->
    <div class="modal-step" *ngIf="joinStep === 3">
      <h2>Complete Your Profile {{selectedMember?.name}}</h2>
      <form (ngSubmit)="submitJoinTeam()">
        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="userEmail" name="userEmail" placeholder="Enter your email" required />
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" [(ngModel)]="userPassword" name="userPassword" placeholder="Create a password" required />
        </div>
        <div class="form-group">
          <label>Height</label>
          <div class="height-inputs">
            <input type="number" [(ngModel)]="heightFeet" name="heightFeet" placeholder="ft" min="0" max="8" required />
            <span>ft</span>
            <input type="number" [(ngModel)]="heightInches" name="heightInches" placeholder="in" min="0" max="11" required />
            <span>in</span>
          </div>
        </div>
        <div class="form-group">
          <label>Gender</label>
          <select [(ngModel)]="gender" name="gender" required>
            <option value="">Select gender</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="other">Other</option>
          </select>
        </div>
        <button type="submit" class="continue-btn">Complete Profile</button>
      </form>
    </div>

    <button class="close-modal-btn" (click)="closeJoinTeamModal()">Ã—</button>
    
    <!-- Step indicator -->
    <div class="step-indicator">
      <div class="step" [class.active]="joinStep >= 1"></div>
      <div class="step" [class.active]="joinStep >= 2"></div>
      <div class="step" [class.active]="joinStep === 3"></div>
    </div>
  </div>
</div>

<!-- Features Modal -->
<div class="modal-overlay" *ngIf="showFeaturesModal" (click)="closeFeaturesModal()">
  <div class="modal-content features-modal" (click)="$event.stopPropagation()">
    <button class="close-modal-btn" (click)="closeFeaturesModal()">Ã—</button>
    <h2>Features</h2>
    <div class="features-list">
      <div class="feature-item">
        <div class="feature-icon">ðŸ”„</div>
        <div class="feature-content">
          <h3>Easy Syncing with Members</h3>
          <p>Seamlessly share formations with your team members for instant viewing and synchronization.</p>
        </div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">ðŸ“Š</div>
        <div class="feature-content">
          <h3>Skill Level Visibility</h3>
          <p>Build formations while seeing each member's skill level to optimize choreography placement.</p>
        </div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">ðŸŽ¬</div>
        <div class="feature-content">
          <h3>3D Backdrop Video View</h3>
          <p>Visualize your formations with backdrop videos in immersive 3D perspective.</p>
        </div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">ðŸ”—</div>
        <div class="feature-content">
          <h3>Segment Merging</h3>
          <p>Combine multiple segments together to build a complete, cohesive performance set.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Contact Modal -->
<div class="modal-overlay" *ngIf="showContactModal" (click)="closeContactModal()">
  <div class="modal-content contact-modal" (click)="$event.stopPropagation()">
    <button class="close-modal-btn" (click)="closeContactModal()">Ã—</button>
    <h2>Contact Me</h2>
    <div class="contact-info">
      <div class="contact-item">
          <a href="mailto:achokshi38@gatech.edu" class="contact-link">achokshi38&#64;gatech.edu</a>
      </div>
          <a href="https://linkedin.com/in/arnav-chokshi" target="_blank" class="linkedin-btn">
            <svg class="linkedin-logo" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
            <span class="linkedin-handle">arnav-chokshi</span>
          </a>
    </div>
  </div>
</div>

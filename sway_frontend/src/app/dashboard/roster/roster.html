<div class="roster-container popup-gap">
  <button class="close-btn-absolute" (click)="closeAndSave()" aria-label="Close">&times;</button>
  
  <!-- Styles Section -->
  <div class="styles-section prominent">
    

    <!-- Add/Edit Style Form -->

  <!-- Edit Roster Table -->
  <div class="edit-roster-section prominent">
    <h2 class="section-title prominent">Team Members</h2>
    <div class="section-subheader">Add members and manage their skills. Members will fill out their height on sign up.</div>
    
    <div class="roster-table-wrapper">
      <table class="roster-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>
              <div class="skills-header">
                <span>Skill</span>
                <select [(ngModel)]="selectedStyleForSkills" (change)="onStyleSelectionChange()" class="style-selector">
                  <option value="">Select Style</option>
                  <option *ngFor="let style of styles" [value]="style.name">{{ style.name }}</option>
                </select>
              </div>
            </th>
            <th>Height</th>
            <th>Captain</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let member of members; let i = index">
            <td>
              <input type="text" [(ngModel)]="member.name" (blur)="updateMemberField(member, 'name', member.name)" />
            </td>
            <td>
              <div class="skill-display" *ngIf="selectedStyleForSkills">
                <div class="skill-slider-container">
                  <div class="skill-style-name">{{ selectedStyleForSkills }}</div>
                  <div class="slider-controls">
                    <input type="range" min="1" max="5" 
                           [(ngModel)]="member.skillLevels[selectedStyleForSkills.toLowerCase()]" 
                           (change)="updateMemberSkill(member, selectedStyleForSkills, member.skillLevels[selectedStyleForSkills.toLowerCase()])" 
                           [ngStyle]="{'accent-color': getStyleColor(selectedStyleForSkills)}"
                           [value]="member.skillLevels[selectedStyleForSkills.toLowerCase()] || 1" />
                    <span class="slider-value">{{ (member.skillLevels[selectedStyleForSkills.toLowerCase()] || 1) + '/5' }}</span>
                  </div>
                </div>
              </div>
              <div class="no-style-selected" *ngIf="!selectedStyleForSkills">
                <span>Select a style above to view skills</span>
              </div>
            </td>
            <td>
              <div class="height-inputs">
                <input type="number" min="3" max="7" [(ngModel)]="member.feet" (change)="updateMemberHeight(member, 'feet', member.feet ?? 0)" placeholder="ft" class="height-feet" />
                <span class="height-sep">'</span>
                <input type="number" min="0" max="11" [(ngModel)]="member.inches" (change)="updateMemberHeight(member, 'inches', member.inches ?? 0)" placeholder="in" class="height-inches" />
                <span class="height-sep">&quot;</span>
              </div>
            </td>
            <td>
              <label class="switch">
                <input type="checkbox" [checked]="member.captain" (change)="toggleCaptainStatus(member)" />
                <span class="slider round"></span>
              </label>
            </td>
            <td>
              <button class="trash-btn" (click)="removeMember(member)" aria-label="Remove member">
                <i class="fas fa-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- Add Member Button -->
    <div class="add-member-row">
      <button (click)="promptAddNewMember()" class="add-member-btn-circle" aria-label="Add new member">
        <i class="fas fa-plus"></i>
      </button>
    </div>
  </div>
</div> 
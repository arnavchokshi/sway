<div class="formations-container">
  <div class="segments-grid">
    <!-- List all segments -->
    <ng-container *ngIf="segments.length > 0; else noSegments">
      <div class="segment-card" *ngFor="let segment of segments" (click)="goToSegment(segment._id)">
        <div class="segment-grid-bg"></div>
        <button class="delete-segment-btn" *ngIf="isCaptain" (click)="deleteSegment(segment._id); $event.stopPropagation()">
          <span class="material-icons">delete</span>
        </button>
        <div class="segment-name">{{ segment.name }}</div>
      </div>
    </ng-container>
    <ng-template #noSegments>
      <div class="no-segments">No segments yet. Create your first segment!</div>
    </ng-template>

    <!-- New Segment Card - Only visible to captains -->
    <div class="segment-card new-segment" *ngIf="isCaptain" (click)="goToCreateSegment()">
      <div class="card-content">
        <i class="fas fa-plus"></i>
        <span>Add New Segment</span>
      </div>
    </div>
  </div>

  <!-- Segment Creation Modal -->
  <div class="modal-backdrop" *ngIf="showSegmentModal">
    <div class="modal frosted-glass-modal">
      <h2>Create New Segment</h2>
      <form (ngSubmit)="submitSegmentModal()">
        <label>
          Name
          <input type="text" [(ngModel)]="newSegmentName" name="name" required />
        </label>
        <label>
          Dimensions (ft)
          <div style="display: flex; align-items: center; gap: 8px;">
            <input type="number" [(ngModel)]="newSegmentDepth" name="depth" min="1" required style="width: 60px;" />
            <span style="font-weight: bold;">x</span>
            <input type="number" [(ngModel)]="newSegmentWidth" name="width" min="1" required style="width: 60px;" />
          </div>
        </label>
        <div class="styles-section-modal">
          <div style="font-weight: 500; margin-bottom: 6px;">Styles</div>
          <div *ngIf="teamStyles.length === 0" style="color: #888; font-size: 0.95em;">No styles defined for this team.</div>
          <div class="styles-list-modal" *ngIf="teamStyles.length > 0">
            <label *ngFor="let style of teamStyles" class="style-checkbox-modal"
                   [class.selected]="isStyleSelected(style)"
                   (click)="toggleStyle(style, !isStyleSelected(style))">
              <span class="style-color-modal" [style.background]="style.color"></span>
              <span>{{ style.name }}</span>
            </label>
          </div>
        </div>
        <div class="modal-actions">
          <button type="submit" class="submit-btn">Create</button>
          <button type="button" (click)="closeSegmentModal()" class="cancel-btn">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div> 